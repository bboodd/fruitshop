<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.shop.fruitshop.admin.AdminMapper">

<!--    findById   -->
    <select id="findById" resultType="com.shop.fruitshop.domain.Admin">
        SELECT *
        FROM admin
        WHERE id = #{id} AND password = #{password}
    </select>

<!--    상품 등록   -->
    <insert id="addProduct">
        INSERT INTO product (category_id, name, price, discount_rate, stock_quantity, content)
        VALUES ((SELECT id FROM category WHERE category_name = #{categoryName}),
                #{name}, #{price}, #{discountRate}, #{stockQuantity}, #{content})
    </insert>

<!--    상품 이미지 등록   -->
    <insert id="addProductImage">
        INSERT INTO product_image (product_id, origin_name, file_name, file_size)
        VALUES ((SELECT id FROM product WHERE name = #{name}),
                #{originName}, #{fileName}, #{fileSize})
    </insert>


</mapper>